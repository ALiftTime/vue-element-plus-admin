import{_ as e}from"./ContentWrap.8c92f6ad.js";import{_ as a}from"./Search.2c0711c7.js";import{_ as t}from"./Dialog.dd46a400.js";import{d as o,s as l,aN as i,r,o as s,c as m,g as n,w as d,a as p,$ as c,l as u,e as f,y as b,t as v,k as j,Y as g}from"./index.23cec3b4.js";import{E as w}from"./el-button.e5ca07de.js";import{E as h}from"./el-tag.365c805e.js";import{_ as D}from"./Table.vue_vue_type_script_lang.69499dfd.js";import{g as y,d as x,s as _}from"./index.87b2a7d7.js";import{u as k}from"./useTable.839672ae.js";import S from"./Write.8414a50a.js";import C from"./Detail.1e2792f2.js";import{u as P}from"./useCrudSchemas.464a0c49.js";import"./el-card.6be1a945.js";import"./el-popper.314ed8a7.js";import"./index2.710268bd.js";import"./Form.bbfd6fad.js";import"./el-col.6e2d0468.js";import"./typescript2.0a085a7f.js";import"./el-input.7364d514.js";import"./event2.c09267d7.js";import"./index2.890f85c7.js";import"./tsxHelper.9b943d36.js";import"./index2.5ceead26.js";import"./scroll2.020cc849.js";import"./debounce.59bf77c9.js";import"./validator2.a811c7fc.js";import"./el-input-number.b18a4f5e.js";import"./el-switch.0593e0cc.js";import"./el-divider.4dda1429.js";import"./InputPassword.34b74344.js";import"./plugin-vue_export-helper.21dcd24c.js";import"./Editor.69d4697d.js";import"./aria2.dceaa135.js";import"./browser2.3783bf08.js";import"./useForm.b78652d4.js";import"./el-overlay.8698a33d.js";import"./vnode2.617dece3.js";import"./use-dialog2.d31cdd02.js";import"./refs2.7ce38a4f.js";import"./el-message-box.561513c9.js";import"./useValidator.d67e0e34.js";import"./Descriptions.26f9c2a5.js";import"./index2.91ff7ee3.js";import"./tree.9e4d3f05.js";const R={class:"mb-10px"},z=o({__name:"ExampleDialog",setup(o){const{register:z,tableObject:E,methods:F}=k({getListApi:y,delListApi:x,response:{list:"list",total:"total"}}),{getList:L,setSearchParams:Y}=F;L();const{t:V}=u(),H=l([{field:"index",label:V("tableDemo.index"),type:"index",form:{show:!1},detail:{show:!1}},{field:"title",label:V("tableDemo.title"),search:{show:!0},form:{colProps:{span:24}},detail:{span:24}},{field:"author",label:V("tableDemo.author")},{field:"display_time",label:V("tableDemo.displayTime"),form:{component:"DatePicker",componentProps:{type:"datetime",valueFormat:"YYYY-MM-DD HH:mm:ss"}}},{field:"importance",label:V("tableDemo.importance"),formatter:(e,a,t)=>i(h,{type:1===t?"success":2===t?"warning":"danger"},(()=>V(1===t?"tableDemo.important":2===t?"tableDemo.good":"tableDemo.commonly"))),form:{component:"Select",componentProps:{options:[{label:"重要",value:3},{label:"良好",value:2},{label:"一般",value:1}]}}},{field:"pageviews",label:V("tableDemo.pageviews"),form:{component:"InputNumber",value:0}},{field:"content",label:V("exampleDemo.content"),table:{show:!1},form:{component:"Editor",colProps:{span:24}},detail:{span:24}},{field:"action",width:"260px",label:V("tableDemo.action"),form:{show:!1},detail:{show:!1}}]),{allSchemas:T}=P(H),U=r(!1),A=r(""),I=()=>{A.value=V("exampleDemo.add"),E.currentRow=null,U.value=!0},M=r(!1),N=async(e,a)=>{var t;E.currentRow=e;const{delList:o,getSelections:l}=F,i=await l();M.value=!0,await o(a?i.map((e=>e.id)):[null==(t=E.currentRow)?void 0:t.id],a).finally((()=>{M.value=!1}))},W=r(""),O=(e,a)=>{A.value=V("edit"===a?"exampleDemo.edit":"exampleDemo.detail"),W.value=a,E.currentRow=e,U.value=!0},$=r(),q=r(!1),B=async()=>{var e;const a=p($);await(null==(e=null==a?void 0:a.elFormRef)?void 0:e.validate((async e=>{if(e){q.value=!0;const e=await(null==a?void 0:a.getFormData());await _(e).catch((()=>{})).finally((()=>{q.value=!1}))&&(U.value=!1,E.currentPage=1,L())}})))};return(o,l)=>(s(),m(c,null,[n(p(e),null,{default:d((()=>[n(p(a),{schema:p(T).searchSchema,onSearch:p(Y),onReset:p(Y)},null,8,["schema","onSearch","onReset"]),f("div",R,[n(p(w),{type:"primary",onClick:I},{default:d((()=>[b(v(p(V)("exampleDemo.add")),1)])),_:1}),n(p(w),{loading:M.value,type:"danger",onClick:l[0]||(l[0]=e=>N(null,!0))},{default:d((()=>[b(v(p(V)("exampleDemo.del")),1)])),_:1},8,["loading"])]),n(p(D),{pageSize:p(E).pageSize,"onUpdate:pageSize":l[1]||(l[1]=e=>p(E).pageSize=e),currentPage:p(E).currentPage,"onUpdate:currentPage":l[2]||(l[2]=e=>p(E).currentPage=e),columns:p(T).tableColumns,data:p(E).tableList,loading:p(E).loading,pagination:{total:p(E).total},onRegister:p(z)},{action:d((({row:e})=>[n(p(w),{type:"primary",onClick:a=>O(e,"edit")},{default:d((()=>[b(v(p(V)("exampleDemo.edit")),1)])),_:2},1032,["onClick"]),n(p(w),{type:"success",onClick:a=>O(e,"detail")},{default:d((()=>[b(v(p(V)("exampleDemo.detail")),1)])),_:2},1032,["onClick"]),n(p(w),{type:"danger",onClick:a=>N(e,!1)},{default:d((()=>[b(v(p(V)("exampleDemo.del")),1)])),_:2},1032,["onClick"])])),_:1},8,["pageSize","currentPage","columns","data","loading","pagination","onRegister"])])),_:1}),n(p(t),{modelValue:U.value,"onUpdate:modelValue":l[4]||(l[4]=e=>U.value=e),title:A.value},{footer:d((()=>["detail"!==W.value?(s(),j(p(w),{key:0,type:"primary",loading:q.value,onClick:B},{default:d((()=>[b(v(p(V)("exampleDemo.save")),1)])),_:1},8,["loading"])):g("v-if",!0),n(p(w),{onClick:l[3]||(l[3]=e=>U.value=!1)},{default:d((()=>[b(v(p(V)("dialogDemo.close")),1)])),_:1})])),default:d((()=>["detail"!==W.value?(s(),j(S,{key:0,ref_key:"writeRef",ref:$,"form-schema":p(T).formSchema,"current-row":p(E).currentRow},null,8,["form-schema","current-row"])):g("v-if",!0),"detail"===W.value?(s(),j(C,{key:1,"detail-schema":p(T).detailSchema,"current-row":p(E).currentRow},null,8,["detail-schema","current-row"])):g("v-if",!0)])),_:1},8,["modelValue","title"])],64))}});export{z as default};
